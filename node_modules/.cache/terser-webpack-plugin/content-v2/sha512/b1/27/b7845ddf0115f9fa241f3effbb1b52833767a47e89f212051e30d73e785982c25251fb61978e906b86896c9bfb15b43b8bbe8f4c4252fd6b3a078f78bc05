{"code":"(this[\"webpackJsonpkorona-virus-api\"]=this[\"webpackJsonpkorona-virus-api\"]||[]).push([[0],{224:function(t,e){},226:function(t,e){},235:function(t,e,n){\"use strict\";n.r(e);var r=n(183),a=n(185),c=n(5),s=n.n(c),u=n(9),o=n(89).default,i=n(98),p=(0,n(33).promisify)(i),f=[\"confirmed\",\"deaths\",\"recovered\"],d=\"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19__TYPE__global.csv\";function l(t){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.replace(\"_TYPE_\",e),t.next=3,o.get(n);case 3:return r=t.sent,t.abrupt(\"return\",r.data);case 5:case\"end\":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(s.a.mark((function t(e){var n,r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e,{from_line:2});case 2:return n=t.sent,r=n.map((function(t){var e=Object(a.a)(t),n=e[0],r=e[1],c=e[2],s=e[3],u=e.slice(4);return{id:\"\".concat(n,\"-\").concat(r),state:n,country:r,latitude:parseInt(c),longitude:parseInt(s),values:u.map((function(t){return parseInt(t)}))}})),c=r.reduce((function(t,e){return t[e.id]=e,t}),{}),t.abrupt(\"return\",c);case 6:case\"end\":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=Object(u.a)(s.a.mark((function t(){var e,n,a,c,u,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e={},n=Object(r.a)(f),t.prev=2,n.s();case 4:if((a=n.n()).done){t.next=14;break}return c=a.value,t.next=8,l(c);case 8:return u=t.sent,t.next=11,h(u);case 11:e[c]=t.sent;case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),n.e(t.t0);case 19:return t.prev=19,n.f(),t.finish(19);case 22:return o=Object.keys(e.confirmed).map((function(t){var n=e.confirmed[t]||{values:[]};e.deaths[t],e.recovered[t];return{id:t,stae:n.state,country:n.country,latitude:n.latitude,longitude:n.longitude,confirmed:n.values,deaths:n.values,recovered:n.values}})),t.abrupt(\"return\",o);case 24:case\"end\":return t.stop()}}),t,null,[[2,16,19,22]])})))).apply(this,arguments)}e.default={download:l,parse:h,downloadAndParse:function(){return w.apply(this,arguments)}}},260:function(t,e){},261:function(t,e){},289:function(t,e){},292:function(t,e){function n(t){var e=new Error(\"Cannot find module '\"+t+\"'\");throw e.code=\"MODULE_NOT_FOUND\",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=292},294:function(t,e){},296:function(t,e){},303:function(t,e){},305:function(t,e){},334:function(t,e){},336:function(t,e){},337:function(t,e){},343:function(t,e){},345:function(t,e){},364:function(t,e){},376:function(t,e){},379:function(t,e){},399:function(t,e,n){\"use strict\";n.r(e);var r=n(5),a=n.n(r),c=n(9),s=n(184),u=n(89).default,o=n(98),i=(0,n(33).promisify)(o),p=\"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_daily_reports/_DATE_.csv\";function f(){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(a.a.mark((function t(){var e,n,r,c,s,o,i,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=new Date).setDate(e.getDate()-1),n=e.getMonth()+1,r=n<10?\"0\".concat(n):n,c=e.getDate(),s=c<10?\"0\".concat(c):c,o=\"\".concat(r,\"-\").concat(s,\"-\").concat(e.getFullYear()),i=p.replace(\"_DATE_\",o),t.next=10,u.get(i);case 10:return f=t.sent,t.abrupt(\"return\",f.data);case 12:case\"end\":return t.stop()}}),t)})))).apply(this,arguments)}function l(t){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e,{from_line:2});case 2:return n=t.sent,r=n.map((function(t){var e=Object(s.a)(t,12),n=(e[0],e[1],e[2]),r=e[3],a=(e[4],e[5]),c=e[6],u=e[7],o=e[8],i=e[9],p=(e[10],e[11]);return{state:n,country:r,latitude:parseInt(a),longitude:parseInt(c),confirmed:parseInt(u),deaths:parseInt(o),recovered:parseInt(i),combinedKey:p}})),t.abrupt(\"return\",r);case 5:case\"end\":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return(h=Object(c.a)(a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:return e=t.sent,t.next=5,l(e);case 5:return n=t.sent,t.abrupt(\"return\",n);case 7:case\"end\":return t.stop()}}),t)})))).apply(this,arguments)}var m={download:f,parse:l,downloadAndParse:function(){return h.apply(this,arguments)}},w=n(235),_=n(236),b=n(398);function x(){return(x=Object(c.a)(a.a.mark((function t(){var e,n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:return e=t.sent,setInterval(Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:e=t.sent;case 3:case\"end\":return t.stop()}}),t)}))),144e5),t.next=6,w.downloadAndParse();case 6:n=t.sent,setInterval(Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.downloadAndParse();case 2:n=t.sent;case 3:case\"end\":return t.stop()}}),t)}))),144e5),(r=_()).use(b()),r.get(\"/data\",(function(t,n){n.json(e)})),r.get(\"/time-series\",(function(t,e){e.json(n)})),r.listen(8e3,(function(){console.log(\"server is running\")})),r.get(\"/\",(function(t,e){e.send(\"Hello World!\")}));case 14:case\"end\":return t.stop()}}),t)})))).apply(this,arguments)}!function(){x.apply(this,arguments)}()}},[[399,1,2]]]);","name":"static/js/main.7bd96123.chunk.js","map":{"version":3,"sources":["static/js/main.7bd96123.chunk.js"],"names":["this","push","224","module","exports","226","235","__webpack_exports__","__webpack_require__","r","D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__","D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_1__","D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__","D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","n","D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","axios","default","parseCsv","parseCsvAsync","promisify","TYPES","URL","download","_x","_download","apply","arguments","Object","a","mark","_callee","type","url","res","wrap","_context","prev","next","replace","get","sent","abrupt","data","stop","parse","_x2","_parse","_callee2","records","locations","locationsById","_context2","from_line","map","record","_record","state","country","latitude","longitude","values","slice","id","concat","parseInt","value","reduce","acc","val","_downloadAndParse","_callee3","locationsByType","_iterator","_step","_context3","s","done","t0","e","f","finish","keys","confirmed","deaths","recovered","stae","downloadAndParse","260","261","289","292","webpackEmptyContext","req","Error","code","resolve","294","296","303","305","334","336","337","343","345","364","376","379","399","regenerator","regenerator_default","asyncToGenerator","slicedToArray","date","month","monthPadded","day","dayPadded","yesterday","yesterdayUrl","Date","setDate","getDate","getMonth","getFullYear","combinedKey","src_data","timeSeries","express","cors","_run","locationsTimeSeries","app","setInterval","use","json","listen","console","log","send","run"],"mappings":"CAACA,KAAK,gCAAkCA,KAAK,iCAAmC,IAAIC,KAAK,CAAC,CAAC,GAAG,CAExFC,IACA,SAAUC,EAAQC,KAMlBC,IACA,SAAUF,EAAQC,KAMlBE,IACA,SAAUH,EAAQI,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACD,IAAIG,EAA4JF,EAAoB,KAChLG,EAA0IH,EAAoB,KAC9JI,EAAkIJ,EAAoB,GACtJK,EAAuJL,EAAoBM,EAAEF,GAC7KG,EAAmJP,EAAoB,GAC5LQ,EAAMR,EAAoB,IAAIS,QAAYC,EAASV,EAAoB,IAA0EW,GAAcC,EAAvEZ,EAAoB,IAAuBY,WAAsCF,GAAcG,EAAM,CAAC,YAAY,SAAS,aAAiBC,EAAI,sJAC5O,SAASC,EAASC,GAAI,OAAOC,EAAUC,MAAM1B,KAAK2B,WAAY,SAASF,IAAwyB,OAA5xBA,EAAUG,OAAOb,EAAkK,EAAzKa,CAAyLf,EAAwIgB,EAAEC,MAAK,SAASC,EAAQC,GAAM,IAAIC,EAAIC,EAAI,OAAOrB,EAAwIgB,EAAEM,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EAAiD,OAA/CL,EAAIX,EAAIiB,QAAQ,SAASP,GAAMI,EAASE,KAAK,EAAStB,EAAMwB,IAAIP,GAAK,KAAK,EAAoB,OAAlBC,EAAIE,EAASK,KAAYL,EAASM,OAAO,SAASR,EAAIS,MAAM,KAAK,EAAE,IAAI,MAAM,OAAOP,EAASQ,UAAWb,QAA8BL,MAAM1B,KAAK2B,WAAY,SAASkB,EAAMC,GAAK,OAAOC,EAAOrB,MAAM1B,KAAK2B,WAAY,SAASoB,IAAq6C,OAA55CA,EAAOnB,OAAOb,EAAkK,EAAzKa,CAAyLf,EAAwIgB,EAAEC,MAAK,SAASkB,EAASL,GAAM,IAAIM,EAAQC,EAAUC,EAAc,OAAOtC,EAAwIgB,EAAEM,MAAK,SAAmBiB,GAAW,OAAS,OAAOA,EAAUf,KAAKe,EAAUd,MAAM,KAAK,EAAmB,OAAjBc,EAAUd,KAAK,EAASnB,EAAcwB,EAAK,CAACU,UAAU,IAAI,KAAK,EAA6nB,OAA3nBJ,EAAQG,EAAUX,KAAKS,EAAUD,EAAQK,KAAI,SAASC,GAAQ,IAAIC,EAAQ5B,OAAOjB,EAAyJ,EAAhKiB,CAAmK2B,GAAQE,EAAMD,EAAQ,GAAGE,EAAQF,EAAQ,GAAGG,EAASH,EAAQ,GAAGI,EAAUJ,EAAQ,GAAGK,EAAOL,EAAQM,MAAM,GAA+C,MAAM,CAACC,GAA5C,GAAGC,OAAOP,EAAM,KAAKO,OAAON,GAAsBD,MAAMA,EAAMC,QAAQA,EAAQC,SAASM,SAASN,GAAUC,UAAUK,SAASL,GAAWC,OAAOA,EAAOP,KAAI,SAASY,GAAO,OAAOD,SAASC,UAAcf,EAAcD,EAAUiB,QAAO,SAASC,EAAIC,GAAqB,OAAhBD,EAAIC,EAAIN,IAAIM,EAAWD,IAAM,IAAWhB,EAAUV,OAAO,SAASS,GAAe,KAAK,EAAE,IAAI,MAAM,OAAOC,EAAUR,UAAWI,QAA4BtB,MAAM1B,KAAK2B,WAAwF,SAAS2C,IAA64D,OAAz3DA,EAAkB1C,OAAOb,EAAkK,EAAzKa,CAAyLf,EAAwIgB,EAAEC,MAAK,SAASyC,IAAW,IAAIC,EAAgBC,EAAUC,EAAM1C,EAAKW,EAAKO,EAAU,OAAOrC,EAAwIgB,EAAEM,MAAK,SAAmBwC,GAAW,OAAS,OAAOA,EAAUtC,KAAKsC,EAAUrC,MAAM,KAAK,EAAEkC,EAAgB,GAAGC,EAAU7C,OAAOlB,EAA2K,EAAlLkB,CAAqLP,GAAOsD,EAAUtC,KAAK,EAAEoC,EAAUG,IAAI,KAAK,EAAE,IAAIF,EAAMD,EAAU3D,KAAK+D,KAAK,CAACF,EAAUrC,KAAK,GAAG,MAAyC,OAAlCN,EAAK0C,EAAMR,MAAMS,EAAUrC,KAAK,EAASf,EAASS,GAAM,KAAK,EAAwC,OAAtCW,EAAKgC,EAAUlC,KAAKkC,EAAUrC,KAAK,GAAUO,EAAMF,GAAM,KAAK,GAAG6B,EAAgBxC,GAAM2C,EAAUlC,KAAK,KAAK,GAAGkC,EAAUrC,KAAK,EAAE,MAAM,KAAK,GAAGqC,EAAUrC,KAAK,GAAG,MAAM,KAAK,GAAGqC,EAAUtC,KAAK,GAAGsC,EAAUG,GAAGH,EAAiB,MAAE,GAAGF,EAAUM,EAAEJ,EAAUG,IAAI,KAAK,GAAmC,OAAhCH,EAAUtC,KAAK,GAAGoC,EAAUO,IAAWL,EAAUM,OAAO,IAAI,KAAK,GAAkb,OAA/a/B,EAAUtB,OAAOsD,KAAKV,EAAgBW,WAAW7B,KAAI,SAASS,GAAI,IAAIoB,EAAUX,EAAgBW,UAAUpB,IAAK,CAACF,OAAO,IAAeW,EAAgBY,OAAOrB,GAA+BS,EAAgBa,UAAUtB,GAAiB,MAAM,CAACA,GAAGA,EAAGuB,KAAKH,EAAU1B,MAAMC,QAAQyB,EAAUzB,QAAQC,SAASwB,EAAUxB,SAASC,UAAUuB,EAAUvB,UAAUuB,UAAUA,EAAUtB,OAAOuB,OAAOD,EAAUtB,OAAOwB,UAAUF,EAAUtB,WAAkBc,EAAUjC,OAAO,SAASQ,GAAW,KAAK,GAAG,IAAI,MAAM,OAAOyB,EAAU/B,UAAW2B,EAAS,KAAK,CAAC,CAAC,EAAE,GAAG,GAAG,WAAmC7C,MAAM1B,KAAK2B,WAAyCpB,EAA6B,QAAI,CAAEgB,SAASA,EAASsB,MAAMA,EAAM0C,iBAAhnE,WAA4B,OAAOjB,EAAkB5C,MAAM1B,KAAK2B,cAI79E6D,IACA,SAAUrF,EAAQC,KAMlBqF,IACA,SAAUtF,EAAQC,KAMlBsF,IACA,SAAUvF,EAAQC,KAMlBuF,IACA,SAAUxF,EAAQC,GAExB,SAASwF,EAAoBC,GAC5B,IAAId,EAAI,IAAIe,MAAM,uBAAyBD,EAAM,KAEjD,MADAd,EAAEgB,KAAO,mBACHhB,EAEPa,EAAoBV,KAAO,WAAa,MAAO,IAC/CU,EAAoBI,QAAUJ,EAC9BzF,EAAOC,QAAUwF,EACjBA,EAAoB7B,GAAK,KAInBkC,IACA,SAAU9F,EAAQC,KAMlB8F,IACA,SAAU/F,EAAQC,KAMlB+F,IACA,SAAUhG,EAAQC,KAMlBgG,IACA,SAAUjG,EAAQC,KAMlBiG,IACA,SAAUlG,EAAQC,KAMlBkG,IACA,SAAUnG,EAAQC,KAMlBmG,IACA,SAAUpG,EAAQC,KAMlBoG,IACA,SAAUrG,EAAQC,KAMlBqG,IACA,SAAUtG,EAAQC,KAMlBsG,IACA,SAAUvG,EAAQC,KAMlBuG,IACA,SAAUxG,EAAQC,KAMlBwG,IACA,SAAUzG,EAAQC,KAMlByG,IACA,SAAU1G,EAAQI,EAAqBC,GAE7C,aAEAA,EAAoBC,EAAEF,GAGtB,IAAIuG,EAActG,EAAoB,GAClCuG,EAAmCvG,EAAoBM,EAAEgG,GAGzDE,EAAmBxG,EAAoB,GAGvCyG,EAAgBzG,EAAoB,KAGpCQ,EAAMR,EAAoB,IAAIS,QAAYC,EAASV,EAAoB,IAA0EW,GAAcC,EAAvEZ,EAAoB,IAAuBY,WAAsCF,GAAcI,EAAI,6HAA6H,SAASC,IAAW,OAAOE,EAAUC,MAAM1B,KAAK2B,WAAY,SAASF,IAAgxB,OAApwBA,EAAUG,OAAOoF,EAAkC,EAAzCpF,CAAyDmF,EAAoBlF,EAAEC,MAAK,SAASC,IAAU,IAAImF,EAAKC,EAAMC,EAAYC,EAAIC,EAAUC,EAAUC,EAAatF,EAAI,OAAO6E,EAAoBlF,EAAEM,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EAAkU,OAAhU4E,EAAK,IAAIO,MAAYC,QAAQR,EAAKS,UAAU,GAAGR,EAAMD,EAAKU,WAAW,EAAER,EAAYD,EAAM,GAAG,IAAInD,OAAOmD,GAAOA,EAAME,EAAIH,EAAKS,UAAUL,EAAUD,EAAI,GAAG,IAAIrD,OAAOqD,GAAKA,EAAIE,EAAU,GAAGvD,OAAOoD,EAAY,KAAKpD,OAAOsD,EAAU,KAAKtD,OAAOkD,EAAKW,eAAeL,EAAalG,EAAIiB,QAAQ,SAASgF,GAAWnF,EAASE,KAAK,GAAUtB,EAAMwB,IAAIgF,GAAc,KAAK,GAAqB,OAAlBtF,EAAIE,EAASK,KAAYL,EAASM,OAAO,SAASR,EAAIS,MAAM,KAAK,GAAG,IAAI,MAAM,OAAOP,EAASQ,UAAWb,QAA8BL,MAAM1B,KAAK2B,WAAY,SAASkB,EAAMrB,GAAI,OAAOuB,EAAOrB,MAAM1B,KAAK2B,WAAY,SAASoB,IAAw+B,OAA/9BA,EAAOnB,OAAOoF,EAAkC,EAAzCpF,CAAyDmF,EAAoBlF,EAAEC,MAAK,SAASkB,EAASL,GAAM,IAAIM,EAAQC,EAAU,OAAO6D,EAAoBlF,EAAEM,MAAK,SAAmBiB,GAAW,OAAS,OAAOA,EAAUf,KAAKe,EAAUd,MAAM,KAAK,EAAmB,OAAjBc,EAAUd,KAAK,EAASnB,EAAcwB,EAAK,CAACU,UAAU,IAAI,KAAK,EAA0jB,OAAxjBJ,EAAQG,EAAUX,KAAKS,EAAUD,EAAQK,KAAI,SAASC,GAAQ,IAAIC,EAAQ5B,OAAOqF,EAA+B,EAAtCrF,CAAyC2B,EAAO,IAAsCE,GAA7BD,EAAQ,GAAUA,EAAQ,GAASA,EAAQ,IAAGE,EAAQF,EAAQ,GAA0BG,GAAXH,EAAQ,GAAYA,EAAQ,IAAGI,EAAUJ,EAAQ,GAAG2B,EAAU3B,EAAQ,GAAG4B,EAAO5B,EAAQ,GAAG6B,EAAU7B,EAAQ,GAAsBsE,GAAZtE,EAAQ,IAAgBA,EAAQ,KAAI,MAAM,CAACC,MAAMA,EAAMC,QAAQA,EAAQC,SAASM,SAASN,GAAUC,UAAUK,SAASL,GAAWuB,UAAUlB,SAASkB,GAAWC,OAAOnB,SAASmB,GAAQC,UAAUpB,SAASoB,GAAWyC,YAAYA,MAAuB1E,EAAUV,OAAO,SAASQ,GAAW,KAAK,EAAE,IAAI,MAAM,OAAOE,EAAUR,UAAWI,QAA4BtB,MAAM1B,KAAK2B,WAAwF,SAAS2C,IAAggB,OAA5eA,EAAkB1C,OAAOoF,EAAkC,EAAzCpF,CAAyDmF,EAAoBlF,EAAEC,MAAK,SAASyC,IAAW,IAAI5B,EAAKO,EAAU,OAAO6D,EAAoBlF,EAAEM,MAAK,SAAmBwC,GAAW,OAAS,OAAOA,EAAUtC,KAAKsC,EAAUrC,MAAM,KAAK,EAAmB,OAAjBqC,EAAUrC,KAAK,EAASf,IAAW,KAAK,EAAuC,OAArCoB,EAAKgC,EAAUlC,KAAKkC,EAAUrC,KAAK,EAASO,EAAMF,GAAM,KAAK,EAA2B,OAAzBO,EAAUyB,EAAUlC,KAAYkC,EAAUjC,OAAO,SAASQ,GAAW,KAAK,EAAE,IAAI,MAAM,OAAOyB,EAAU/B,UAAW2B,QAAuC7C,MAAM1B,KAAK2B,WAAyC,IAAIoG,EAAW,CAAExG,SAASA,EAASsB,MAAMA,EAAM0C,iBAAjtB,WAA4B,OAAOjB,EAAkB5C,MAAM1B,KAAK2B,aAGn0EqG,EAAWxH,EAAoB,KAASyH,EAAQzH,EAAoB,KAAS0H,EAAK1H,EAAoB,KAAuD,SAAS2H,IAAmiD,OAA5hDA,EAAKvG,OAAOoF,EAAkC,EAAzCpF,CAAyDmF,EAAoBlF,EAAEC,MAAK,SAASyC,IAAW,IAAIrB,EAAUkF,EAAoBC,EAAI,OAAOtB,EAAoBlF,EAAEM,MAAK,SAAmBwC,GAAW,OAAS,OAAOA,EAAUtC,KAAKsC,EAAUrC,MAAM,KAAK,EAAmB,OAAjBqC,EAAUrC,KAAK,EAASyF,IAAW,KAAK,EAAsa,OAApa7E,EAAUyB,EAAUlC,KAAK6F,YAAyB1G,OAAOoF,EAAkC,EAAzCpF,CAAyDmF,EAAoBlF,EAAEC,MAAK,SAASC,IAAU,OAAOgF,EAAoBlF,EAAEM,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EAAkB,OAAhBF,EAASE,KAAK,EAASyF,IAAW,KAAK,EAAE7E,EAAUd,EAASK,KAAK,KAAK,EAAE,IAAI,MAAM,OAAOL,EAASQ,UAAWb,OAAa,OAAc4C,EAAUrC,KAAK,EAAS0F,EAAWzC,mBAAmB,KAAK,EAAE6C,EAAoBzD,EAAUlC,KAAK6F,YAAyB1G,OAAOoF,EAAkC,EAAzCpF,CAAyDmF,EAAoBlF,EAAEC,MAAK,SAASkB,IAAW,OAAO+D,EAAoBlF,EAAEM,MAAK,SAAmBiB,GAAW,OAAS,OAAOA,EAAUf,KAAKe,EAAUd,MAAM,KAAK,EAAmB,OAAjBc,EAAUd,KAAK,EAAS0F,EAAWzC,mBAAmB,KAAK,EAAE6C,EAAoBhF,EAAUX,KAAK,KAAK,EAAE,IAAI,MAAM,OAAOW,EAAUR,UAAWI,OAAc,QAAcqF,EAAIJ,KAAcM,IAAIL,KAAQG,EAAI7F,IAAI,SAAQ,SAASqD,EAAI3D,GAAKA,EAAIsG,KAAKtF,MAAcmF,EAAI7F,IAAI,gBAAe,SAASqD,EAAI3D,GAAKA,EAAIsG,KAAKJ,MAAwBC,EAAII,OAAO,KAAK,WAAWC,QAAQC,IAAI,wBAAwBN,EAAI7F,IAAI,KAAI,SAASqD,EAAI3D,GAAKA,EAAI0G,KAAK,mBAAmB,KAAK,GAAG,IAAI,MAAM,OAAOjE,EAAU/B,UAAW2B,QAA0B7C,MAAM1B,KAAK2B,YAArnD,WAAsBwG,EAAKzG,MAAM1B,KAAK2B,WAA2lDkH,KAI9uD,CAAC,CAAC,IAAI,EAAE"},"input":"(this[\"webpackJsonpkorona-virus-api\"] = this[\"webpackJsonpkorona-virus-api\"] || []).push([[0],{\n\n/***/ 224:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 226:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 235:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(183);\n/* harmony import */ var D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(185);\n/* harmony import */ var D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5);\n/* harmony import */ var D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9);\nvar axios=__webpack_require__(89).default;var parseCsv=__webpack_require__(98);var _require=__webpack_require__(33),promisify=_require.promisify;var parseCsvAsync=promisify(parseCsv);var TYPES=['confirmed','deaths','recovered'];var URL='https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19__TYPE__global.csv';//https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19__TYPE__global.csv\nfunction download(_x){return _download.apply(this,arguments);}function _download(){_download=Object(D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(/*#__PURE__*/D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee(type){var url,res;return D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=URL.replace('_TYPE_',type);_context.next=3;return axios.get(url);case 3:res=_context.sent;return _context.abrupt(\"return\",res.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return _download.apply(this,arguments);}function parse(_x2){return _parse.apply(this,arguments);}function _parse(){_parse=Object(D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(/*#__PURE__*/D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(data){var records,locations,locationsById;return D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return parseCsvAsync(data,{from_line:2});case 2:records=_context2.sent;locations=records.map(function(record){var _record=Object(D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(record),state=_record[0],country=_record[1],latitude=_record[2],longitude=_record[3],values=_record.slice(4);var id=\"\".concat(state,\"-\").concat(country);return{id:id,state:state,country:country,latitude:parseInt(latitude),longitude:parseInt(longitude),values:values.map(function(value){return parseInt(value);})};});locationsById=locations.reduce(function(acc,val){acc[val.id]=val;return acc;},{});return _context2.abrupt(\"return\",locationsById);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _parse.apply(this,arguments);}function downloadAndParse(){return _downloadAndParse.apply(this,arguments);}function _downloadAndParse(){_downloadAndParse=Object(D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(/*#__PURE__*/D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(){var locationsByType,_iterator,_step,type,data,locations;return D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:locationsByType={};_iterator=Object(D_home_korona_virus_api_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(TYPES);_context3.prev=2;_iterator.s();case 4:if((_step=_iterator.n()).done){_context3.next=14;break;}type=_step.value;_context3.next=8;return download(type);case 8:data=_context3.sent;_context3.next=11;return parse(data);case 11:locationsByType[type]=_context3.sent;case 12:_context3.next=4;break;case 14:_context3.next=19;break;case 16:_context3.prev=16;_context3.t0=_context3[\"catch\"](2);_iterator.e(_context3.t0);case 19:_context3.prev=19;_iterator.f();return _context3.finish(19);case 22:locations=Object.keys(locationsByType.confirmed).map(function(id){var confirmed=locationsByType.confirmed[id]||{values:[]};var deaths=locationsByType.deaths[id]||{values:[]};var recovered=locationsByType.recovered[id]||{values:[]};return{id:id,stae:confirmed.state,country:confirmed.country,latitude:confirmed.latitude,longitude:confirmed.longitude,confirmed:confirmed.values,deaths:confirmed.values,recovered:confirmed.values};});return _context3.abrupt(\"return\",locations);case 24:case\"end\":return _context3.stop();}}},_callee3,null,[[2,16,19,22]]);}));return _downloadAndParse.apply(this,arguments);}/* harmony default export */ __webpack_exports__[\"default\"] = ({download:download,parse:parse,downloadAndParse:downloadAndParse});\n\n/***/ }),\n\n/***/ 260:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 261:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 289:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 292:\n/***/ (function(module, exports) {\n\nfunction webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 292;\n\n/***/ }),\n\n/***/ 294:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 296:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 303:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 305:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 334:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 336:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 337:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 343:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 345:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 364:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 376:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 379:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 399:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(5);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules\nvar slicedToArray = __webpack_require__(184);\n\n// CONCATENATED MODULE: ./src/data.js\nvar axios=__webpack_require__(89).default;var parseCsv=__webpack_require__(98);var _require=__webpack_require__(33),promisify=_require.promisify;var parseCsvAsync=promisify(parseCsv);var URL='https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_daily_reports/_DATE_.csv';function download(){return _download.apply(this,arguments);}function _download(){_download=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var date,month,monthPadded,day,dayPadded,yesterday,yesterdayUrl,res;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:date=new Date();date.setDate(date.getDate()-1);month=date.getMonth()+1;monthPadded=month<10?\"0\".concat(month):month;day=date.getDate();dayPadded=day<10?\"0\".concat(day):day;yesterday=\"\".concat(monthPadded,\"-\").concat(dayPadded,\"-\").concat(date.getFullYear());yesterdayUrl=URL.replace('_DATE_',yesterday);_context.next=10;return axios.get(yesterdayUrl);case 10:res=_context.sent;return _context.abrupt(\"return\",res.data);case 12:case\"end\":return _context.stop();}}},_callee);}));return _download.apply(this,arguments);}function parse(_x){return _parse.apply(this,arguments);}function _parse(){_parse=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(data){var records,locations;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return parseCsvAsync(data,{from_line:2});case 2:records=_context2.sent;locations=records.map(function(record){var _record=Object(slicedToArray[\"a\" /* default */])(record,12),fips=_record[0],admin2=_record[1],state=_record[2],country=_record[3],lastUpdated=_record[4],latitude=_record[5],longitude=_record[6],confirmed=_record[7],deaths=_record[8],recovered=_record[9],active=_record[10],combinedKey=_record[11];return{state:state,country:country,latitude:parseInt(latitude),longitude:parseInt(longitude),confirmed:parseInt(confirmed),deaths:parseInt(deaths),recovered:parseInt(recovered),combinedKey:combinedKey};});return _context2.abrupt(\"return\",locations);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _parse.apply(this,arguments);}function downloadAndParse(){return _downloadAndParse.apply(this,arguments);}function _downloadAndParse(){_downloadAndParse=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){var data,locations;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return download();case 2:data=_context3.sent;_context3.next=5;return parse(data);case 5:locations=_context3.sent;return _context3.abrupt(\"return\",locations);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return _downloadAndParse.apply(this,arguments);}/* harmony default export */ var src_data = ({download:download,parse:parse,downloadAndParse:downloadAndParse});\n// CONCATENATED MODULE: ./src/index.js\n//const data = require('./data.js')\nvar timeSeries=__webpack_require__(235);var express=__webpack_require__(236);var cors=__webpack_require__(398);function run(){return _run.apply(this,arguments);}function _run(){_run=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){var locations,locationsTimeSeries,app;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return src_data();case 2:locations=_context3.sent;setInterval(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return src_data();case 2:locations=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);})),1000*60*60*4);_context3.next=6;return timeSeries.downloadAndParse();case 6:locationsTimeSeries=_context3.sent;setInterval(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return timeSeries.downloadAndParse();case 2:locationsTimeSeries=_context2.sent;case 3:case\"end\":return _context2.stop();}}},_callee2);})),1000*60*60*4);app=express();app.use(cors());app.get('/data',function(req,res){res.json(locations);});app.get('/time-series',function(req,res){res.json(locationsTimeSeries);});app.listen(8000,function(){console.log('server is running');});app.get('/',function(req,res){res.send('Hello World!');});case 14:case\"end\":return _context3.stop();}}},_callee3);}));return _run.apply(this,arguments);}run();\n\n/***/ })\n\n},[[399,1,2]]]);","inputSourceMap":{"version":3,"sources":["ignored D:\\home\\korona-virus-api\\node_modules\\stream-browserify\\node_modules\\readable-stream\\lib util","ignored D:\\home\\korona-virus-api\\node_modules\\stream-browserify\\node_modules\\readable-stream\\lib\\internal\\streams util","D:/home/korona-virus-api/src/time-series.js","ignored D:\\home\\korona-virus-api\\node_modules\\iconv-lite\\lib ./streams","ignored D:\\home\\korona-virus-api\\node_modules\\iconv-lite\\lib ./extend-node","ignored D:\\home\\korona-virus-api\\node_modules\\methods http","D:\\home\\korona-virus-api\\node_modules\\express\\lib sync","ignored D:\\home\\korona-virus-api\\node_modules\\stream-http\\node_modules\\readable-stream\\lib util","ignored D:\\home\\korona-virus-api\\node_modules\\stream-http\\node_modules\\readable-stream\\lib\\internal\\streams util","ignored D:\\home\\korona-virus-api\\node_modules\\readable-stream\\lib util","ignored D:\\home\\korona-virus-api\\node_modules\\readable-stream\\lib\\internal\\streams util","ignored D:\\home\\korona-virus-api\\node_modules\\diffie-hellman\\node_modules\\bn.js\\lib buffer","ignored D:\\home\\korona-virus-api\\node_modules\\miller-rabin\\node_modules\\bn.js\\lib buffer","ignored D:\\home\\korona-virus-api\\node_modules\\brorand crypto","ignored D:\\home\\korona-virus-api\\node_modules\\bn.js\\lib buffer","ignored D:\\home\\korona-virus-api\\node_modules\\elliptic\\node_modules\\bn.js\\lib buffer","ignored D:\\home\\korona-virus-api\\node_modules\\asn1.js\\node_modules\\bn.js\\lib buffer","ignored D:\\home\\korona-virus-api\\node_modules\\create-ecdh\\node_modules\\bn.js\\lib buffer","ignored D:\\home\\korona-virus-api\\node_modules\\public-encrypt\\node_modules\\bn.js\\lib buffer","D:/home/korona-virus-api/src/data.js","D:/home/korona-virus-api/src/index.js"],"names":["axios","require","default","parseCsv","promisify","parseCsvAsync","TYPES","URL","download","type","url","replace","get","res","data","parse","from_line","records","locations","map","record","state","country","latitude","longitude","values","id","parseInt","value","locationsById","reduce","acc","val","downloadAndParse","locationsByType","Object","keys","confirmed","deaths","recovered","stae","date","Date","setDate","getDate","month","getMonth","monthPadded","day","dayPadded","yesterday","getFullYear","yesterdayUrl","fips","admin2","lastUpdated","active","combinedKey","timeSeries","express","cors","run","setInterval","locationsTimeSeries","app","use","req","json","listen","console","log","send"],"mappings":"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","file":"x","sourcesContent":["/* (ignored) */","/* (ignored) */","const axios = require('axios').default\r\nconst parseCsv = require('csv-parse')\r\nconst { promisify } = require('util')\r\nconst parseCsvAsync = promisify(parseCsv)\r\n\r\nconst TYPES = ['confirmed', 'deaths', 'recovered']\r\n\r\nconst URL = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19__TYPE__global.csv';\r\n\r\n\r\n//https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19__TYPE__global.csv\r\n\r\nasync function download(type){\r\n    const url = URL.replace('_TYPE_',type);\r\n    const res = await axios.get(url);\r\n    return res.data;\r\n}\r\n\r\n\r\nasync function parse(data) {\r\n    const records = await parseCsvAsync(data, { from_line: 2 })\r\n        \r\n        const locations = records.map(record => {\r\n            const [ state,country,latitude,longitude, ...values ] = record;\r\n            \r\n            const id = `${state}-${country}`;\r\n\r\n\r\n             return {\r\n                 id,\r\n                 state,\r\n                 country,\r\n                 latitude: parseInt(latitude),\r\n                 longitude: parseInt(longitude),\r\n                 values: values.map(value => parseInt(value)),\r\n             }\r\n        });\r\nconst locationsById = locations.reduce((acc, val) => {\r\n    acc[val.id] = val;\r\n    return acc;\r\n}, {})\r\n        return locationsById;\r\n}\r\n\r\n\r\nasync function downloadAndParse(){\r\n    const locationsByType = {};\r\n\r\n    for (const type of TYPES){\r\n        const data = await download(type);\r\n        locationsByType[type] =  await parse(data);\r\n    }\r\n    const locations = Object.keys(locationsByType.confirmed).map(id => {\r\n        const confirmed = locationsByType.confirmed[id] || { values: []};\r\n        const deaths = locationsByType.deaths[id] || { values: []};\r\n        const recovered = locationsByType.recovered[id] || { values: []};\r\n        return {\r\n            id,\r\n            stae: confirmed.state,\r\n            country: confirmed.country,\r\n            latitude: confirmed.latitude,\r\n            longitude: confirmed.longitude,\r\n\r\n            confirmed: confirmed.values,\r\n            deaths: confirmed.values,\r\n            recovered: confirmed.values\r\n\r\n        };\r\n    });\r\n\r\nreturn locations;\r\n\r\n}\r\n\r\nexport default {\r\n    download,\r\n    parse,\r\n    downloadAndParse\r\n  }","/* (ignored) */","/* (ignored) */","/* (ignored) */","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 292;","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","const axios = require('axios').default\r\nconst parseCsv = require('csv-parse')\r\nconst { promisify } = require('util')\r\nconst parseCsvAsync = promisify(parseCsv)\r\n\r\nconst URL = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_daily_reports/_DATE_.csv';\r\n\r\n\r\nasync function download(){\r\n\r\n    const date = new Date();\r\n    date.setDate(date.getDate()-1);\r\n    const month = date.getMonth() + 1;\r\n    const monthPadded = month < 10 ? `0${month}` : month;\r\n    const day = date.getDate();\r\n    const dayPadded = day < 10 ? `0${day}` : day;\r\n\r\n    const yesterday = `${monthPadded}-${dayPadded}-${date.getFullYear()}`;\r\n    const yesterdayUrl = URL.replace('_DATE_',yesterday);\r\n\r\n    const res = await axios.get(yesterdayUrl);\r\n    return res.data;\r\n}\r\nasync function parse(data) {\r\n    const records = await parseCsvAsync(data, { from_line: 2 })\r\n        \r\n        const locations = records.map(record => {\r\n            const [ \r\n                fips, admin2,state,country,lastUpdated,\r\n                latitude,longitude, confirmed, deaths, recovered,\r\n                active, combinedKey\r\n\r\n             ] = record;\r\n\r\n             return {\r\n                 state,\r\n                 country,\r\n                 latitude: parseInt(latitude),\r\n                 longitude: parseInt(longitude),\r\n                 confirmed: parseInt(confirmed),\r\n                 deaths: parseInt(deaths),\r\n                 recovered: parseInt(recovered),\r\n                 combinedKey\r\n             }\r\n        });\r\n\r\n        return locations;\r\n}\r\n\r\nasync function downloadAndParse(){\r\nconst data = await download();\r\nconst locations = await parse(data);\r\nreturn locations;\r\n\r\n}\r\n\r\nexport default {\r\n    download,\r\n    parse,\r\n    downloadAndParse\r\n  }\r\n","\r\n//const data = require('./data.js')\r\nimport downloadAndParse from './data';\r\nconst timeSeries = require('./time-series.js')\r\nconst express = require('express')\r\nconst cors = require('cors')\r\n\r\n\r\n\r\nasync function run(){\r\nlet locations = await downloadAndParse();\r\n\r\nsetInterval(async () => {\r\n    locations = await downloadAndParse();\r\n},1000 * 60 * 60 * 4)\r\n\r\nlet locationsTimeSeries = await timeSeries.downloadAndParse();\r\n\r\nsetInterval(async () => {\r\n    locationsTimeSeries = await timeSeries.downloadAndParse();\r\n},1000 * 60 * 60 * 4)\r\n\r\nconst app = express()\r\napp.use(cors());\r\n\r\napp.get('/data',(req, res) => {\r\n    res.json(locations);\r\n})\r\n\r\napp.get('/time-series',(req, res) => {\r\n    res.json(locationsTimeSeries);\r\n})\r\n\r\napp.listen(8000, () => {\r\n    console.log('server is running')\r\n})\r\n\r\napp.get('/',(req,res) => {\r\n\r\n    res.send('Hello World!');\r\n})\r\n\r\n}\r\n\r\nrun()"]}}